(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(35),a=n.n(r),c=(n(92),n(8)),o=n.n(c),i=n(11),l=n(13),u=n(10),d=n.n(u),m=n(24),j=n(25),h=n(87),p=n(38),b="FETCH_POSTS",O="FETCH_USER",f="FETCH_COMMENTS",x={items:[],item:{}},g={items:[],item:{}},v={item:{}},y=Object(j.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(p.a)(Object(p.a)({},e),{},{items:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{item:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(p.a)(Object(p.a)({},e),{},{items:t.payload});default:return e}}}),w=[h.a],k=Object(j.e)(y,{},Object(j.d)(j.a.apply(void 0,w))),C=n(9),S=n(14),N=n(16),P=n(17),T=n(20),I=n(19),_=(n(23),n(55)),z=n(34),D=n(36),L=n(65),U=n(1),E=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e){return Object(N.a)(this,n),t.call(this,e)}return Object(P.a)(n,[{key:"renderNavbarAccountOptions",value:function(){return this.props.authorization?Object(U.jsxs)(z.a,{children:[Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/new_post",children:"New Post"})}),Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/account",children:"Account"})}),Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/logout",children:"Logout"})})]}):Object(U.jsxs)(z.a,{children:[Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/login",children:"Login"})}),Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/register",children:"Register"})})]})}},{key:"render",value:function(){return Object(U.jsx)("div",{children:Object(U.jsx)(_.a,{expand:"md",bg:"color",variant:"dark",collapseOnSelect:!0,children:Object(U.jsxs)(L.a,{children:[Object(U.jsx)("img",{width:30,height:30,className:"zencircle",src:"https://zennitapp.s3.amazonaws.com/zencircle.png",alt:"zennit zen circle"}),Object(U.jsx)(_.a.Brand,{as:C.b,className:"mr-4",to:"/home",children:"Zennit"}),Object(U.jsx)(_.a.Toggle,{"aria-controls":"navbarToggle"}),Object(U.jsxs)(_.a.Collapse,{id:"navbarToggle",children:[Object(U.jsx)(z.a,{className:"mr-auto",children:Object(U.jsx)(D.a,{children:Object(U.jsx)(z.a.Link,{as:C.b,to:"/home",children:"Home"})})}),this.renderNavbarAccountOptions()]})]})})})}}]),n}(s.Component),M=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){return Object(U.jsx)("div",{children:Object(U.jsx)("h1",{children:"About Page"})})}}]),n}(s.Component),A=n(56),B=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"render",value:function(){return Object(U.jsx)("div",{className:"col-md-4",children:Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("h3",{children:"Expedients"}),Object(U.jsxs)("div",{className:"text-muted",children:["Currently Under Construction",Object(U.jsxs)(A.a,{children:[Object(U.jsx)(A.a.Item,{children:Object(U.jsx)(C.b,{to:"/about",children:"About"})}),Object(U.jsx)(A.a.Item,{children:Object(U.jsx)(C.b,{to:"/recent_comments",children:"Recent Comments"})}),Object(U.jsx)(A.a.Item,{children:Object(U.jsx)(C.b,{to:"/users",children:"Users"})})]})]})]})})}}]),n}(s.Component),V=n(6),H=n(12);function q(e){var t=Object(S.f)();function n(){return(n=Object(i.a)(o.a.mark((function e(n){var s,r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t.push("/login"),s=n.target.username.value.trim(),r=n.target.email.value.trim(),a=n.target.password.value,e.prev=5,e.next=8,d()({method:"post",url:"/api/register",data:{username:s,email:r,password:a}});case 8:c=e.sent,console.log(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"Join Zennit!"}),Object(U.jsxs)(V.a,{onSubmit:function(e){return function(e){return n.apply(this,arguments)}(e)},children:[Object(U.jsxs)(V.a.Group,{controlId:"username",children:[Object(U.jsx)(V.a.Label,{children:"Username"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"username",placeholder:"Username"})]}),Object(U.jsxs)(V.a.Group,{controlId:"email",children:[Object(U.jsx)(V.a.Label,{children:"Email"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Enter email"}),Object(U.jsx)(V.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(U.jsxs)(V.a.Group,{controlId:"password",children:[Object(U.jsx)(V.a.Label,{children:"Password"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"password",placeholder:"Password","aria-describedby":"passwordHelpBlock"}),Object(U.jsx)(V.a.Text,{id:"passwordHelpBlock",muted:!0,children:"Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji."})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Sign Up"})]})]}),Object(U.jsx)("div",{className:"border-top pt-3",children:Object(U.jsxs)("small",{className:"text-muted",children:["Already Have An Account? ",Object(U.jsx)(C.b,{className:"ml-2",to:"/login",children:"Sign In"})]})})]})}var G=n(18);function Y(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),r=Object(s.useState)(!1),a=Object(l.a)(r,2),c=a[0],u=a[1],m=Object(s.useState)("warning"),j=Object(l.a)(m,2),h=j[0],p=j[1],b=Object(s.useState)("Something went wrong, please try again later!"),O=Object(l.a)(b,2),f=O[0],x=O[1],g=Object(S.f)();function v(){return(v=Object(i.a)(o.a.mark((function e(t){var s,r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=t.target.email.value.trim(),r=t.target.password.value,e.prev=3,e.next=6,d()({method:"post",url:"/api/login",data:{email:s,password:r}});case 6:a=e.sent,console.log(a),200===a.status?(c=a.data.token,localStorage.setItem("token","Bearer "+c),localStorage.setItem("loginMessage",!0),n(!0),g.replace("/"),g.go("/")):(n(!1),u(!0),p("warning"),x("Something went wrong, please try again later!")),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),n(!1),console.log(e.t0.response),400===e.t0.response.status?(u(!0),p("warning"),x("Incorrect Email or Password")):(u(!0),p("danger"),x("Something went wrong, please try again later!"));case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){c&&setTimeout((function(){u(!1)}),5e3)})),Object(U.jsxs)("div",{children:[function(){if(c)return Object(U.jsx)(G.a,{variant:h,children:f})}(),Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"Login"}),Object(U.jsxs)(V.a,{onSubmit:function(e){return function(e){return v.apply(this,arguments)}(e)},children:[Object(U.jsxs)(V.a.Group,{controlId:"email",children:[Object(U.jsx)(V.a.Label,{children:"Email"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Account Email"})]}),Object(U.jsxs)(V.a.Group,{controlId:"password",children:[Object(U.jsx)(V.a.Label,{children:"Password"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"password",placeholder:"Account Password"})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Login"}),Object(U.jsx)("small",{className:"text-muted ml-2",children:Object(U.jsx)(C.b,{to:"/forgot_password",children:"Forgot Password?"})})]})]}),Object(U.jsx)("div",{className:"border-top pt-3",children:Object(U.jsxs)("small",{className:"text-muted",children:["Need An Account? ",Object(U.jsx)(C.b,{className:"ml-2",to:"/register",children:"Sign Up Here!"})]})})]})}function R(){var e=Object(S.f)();return Object(s.useEffect)((function(){localStorage.removeItem("token"),localStorage.removeItem("loginMessage"),e.push("/"),e.go("/")})),Object(U.jsx)("div",{})}var W=function(){return function(e){d()({method:"get",url:"/api/get_user",headers:{"x-access-token":localStorage.getItem("token")}}).then((function(t){e({type:O,payload:t.data})}))}},F=n(26),J=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning",submission:!1},s}return Object(P.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.submission&&(this.props.fetchUser(),this.setState({submission:!1})),this.state.alert&&setTimeout((function(){e.setState({alert:!1})}),5e3)}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertText,s=e.alertType;if(t)return Object(U.jsx)(G.a,{variant:s,children:n})}},{key:"handleSubmit",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.email.value.trim(),s=t.target.username.value.trim(),r=t.target.imageUpload.files[0],(a=new FormData(t.target)).append("username",s),a.append("email",n),a.append("image_file",r),e.prev=8,e.next=11,d()({headers:{"x-access-token":localStorage.getItem("token"),"Content-Type":"multipart/form-data"},method:"post",url:"/api/update_user",data:a});case 11:200===e.sent.status?this.setState({alert:!0,alertType:"success",alertText:"Successfully updated account info!",submission:!0}):this.setState({alert:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),e.t0.response?(console.log(e.t0.response),400===e.t0.response.status?this.setState({alert:!0,alertType:"danger",alertText:"There was an issue updating your information, please try again later!"}):500===e.t0.response.status&&this.setState({alert:!0})):this.setState({alert:!0});case 18:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.user;return Object(U.jsxs)("div",{children:[this.renderAlert(),Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsxs)(F.a,{children:[Object(U.jsx)("img",{width:64,height:64,className:"rounded-circle account-img",src:"https://zennitapp.s3.amazonaws.com/".concat(t.image_file),alt:"Current User Profile Avatar"}),Object(U.jsxs)(F.a.Body,{children:[Object(U.jsx)("h2",{className:"account-heading",children:t.username}),Object(U.jsx)("p",{className:"text-secondary",children:t.email})]})]}),Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"Account Info"}),Object(U.jsxs)(V.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(U.jsxs)(V.a.Group,{controlId:"email",children:[Object(U.jsx)(V.a.Label,{children:"Email"}),Object(U.jsx)(V.a.Control,{size:"lg",type:"email",placeholder:"New Email"})]}),Object(U.jsxs)(V.a.Group,{controlId:"username",children:[Object(U.jsx)(V.a.Label,{children:"Username"}),Object(U.jsx)(V.a.Control,{size:"lg",type:"username",placeholder:"New Username"})]}),Object(U.jsxs)(V.a.Group,{children:[Object(U.jsx)(V.a.File,{id:"imageUpload",label:"Update Profile Picture",accept:".png, .jpg, .jpeg","aria-describedby":"imageHelpBlock",name:"image_file"}),Object(U.jsx)(V.a.Text,{id:"imagedHelpBlock",muted:!0,children:"Your image must be a common format such as: .png .jpg .jpeg"})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Update"})]})]})]})}}]),n}(s.Component),Z=Object(m.b)((function(e){return{user:e.users.item}}),{fetchUser:W})(J),K=n(30),Q=function(){return function(e){d()({method:"get",url:"/api/posts"}).then((function(t){e({type:b,payload:t.data})}))}},X=function(){return function(e){d()({method:"get",url:"/api/comments"}).then((function(t){e({type:f,payload:t.data})}))}},$=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={commentsViewable:4,alert:!1,alertType:"warning",alertText:"Something went wrong, please try again later!"},s}return Object(P.a)(n,[{key:"handleSubmit",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.post,s=t.target.comment.value.trim(),t.preventDefault(),e.prev=3,e.next=6,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/new_comment",data:{post_id:n,content:s}});case 6:201===e.sent.status?(this.props.fetchComments(),this.setState({alert:!0,alertType:"success",alertText:"Comment Successfully Created!"})):this.setState({alert:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response?(console.log(e.t0.response),400===e.t0.response.status?this.setState({alert:!0,alertType:"warning",alertText:"Please login to comment!"}):500===e.t0.response.status&&this.setState({alert:!0,alertType:"warning",alertText:"Something went wrong, please try again later!"})):this.setState({alert:!0,alertType:"warning",alertText:"Something went wrong, please try again later!"});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAlert",value:function(){var e=this,t=this.state,n=t.alert,s=t.alertText,r=t.alertType;if(n)return setTimeout((function(){e.setState({alert:!1,alertType:"warning",alertText:"Please login to comment!"})}),5e3),Object(U.jsx)(G.a,{variant:r,children:s})}},{key:"render",value:function(){var e=this,t=this.props.user;return Object(U.jsxs)("div",{children:[this.renderAlert(),Object(U.jsxs)(F.a,{children:[Object(U.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(t.image_file),alt:"current user"}),Object(U.jsxs)(V.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(U.jsx)(V.a.Group,{controlId:"comment",children:Object(U.jsx)(V.a.Control,{required:!0,as:"textarea",size:"md",cols:"55",type:"comment",placeholder:"Expound the dharma..."})}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Comment"})]})]})]})}}]),n}(s.Component),ee=Object(m.b)((function(e){return{comments:e.comments.items}}),{fetchComments:X})($);n(44),n(45);var te=function(e){Object(T.a)(s,e);var t=Object(I.a)(s);function s(e){var n;return Object(N.a)(this,s),(n=t.call(this,e)).state={postsViewable:4,commentsViewable:4,userIs:!1},n}return Object(P.a)(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchPosts,n=e.fetchComments;t(),n()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=(t.fetchComments,t.authorization);t.comments;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderDatePosted",value:function(e){var t=n(71)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(U.jsx)("small",{className:"text-muted",children:t})}},{key:"renderArticleContent",value:function(e,t){return e.length>1e3?Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{className:"article-content",children:e.substr(0,1e3)}),Object(U.jsx)(K.a,{className:"mr-2",to:"/post/".concat(t),children:"Read More"})]}):Object(U.jsx)("div",{children:Object(U.jsx)("p",{className:"article-content",children:e})})}},{key:"handleDeleteComment",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(U.jsx)(ee,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(U.jsx)("div",{className:"mb-3",children:Object(U.jsxs)(K.a,{to:"/post/".concat(e,"#comment-length"),children:["Comments(",t.length,")"]})})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(U.jsx)(H.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(U.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments,s=this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"comment-content",children:[Object(U.jsxs)("div",{className:"comment-head",children:[Object(U.jsx)(K.a,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(U.jsx)("hr",{}),Object(U.jsx)("p",{className:"article-content",children:e.content})]})},e.id)})).slice(0,s)}},{key:"renderProfileImage",value:function(e){return Object(U.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderPostContent",value:function(){var e=this,t=this.state.postsViewable;this.props.comments;return this.props.posts.map((function(t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)(F.a,{className:"content-section",children:[Object(U.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.renderProfileImage(t["user.image_file"])}),Object(U.jsxs)(F.a.Body,{children:[Object(U.jsxs)("div",{className:"article-metadata",children:[Object(U.jsx)(K.a,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted)]}),Object(U.jsx)("h2",{children:Object(U.jsx)(K.a,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),e.renderArticleContent(t.content,t.id)]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(U.jsx)("hr",{})]},t.id)})).slice(0,t)}},{key:"renderMorePosts",value:function(e){var t=e.target,n=this.state.postsViewable,s=this.props.posts;t.scrollHeight-t.scrollTop===t.clientHeight&&n!==s.length&&this.setState({postsViewable:n+2},(function(){console.log(n)}))}},{key:"render",value:function(){var e=this;return Object(U.jsx)("div",{className:"scrolling",onScroll:function(t){return e.renderMorePosts(t)},children:this.renderPostContent()})}}]),s}(s.Component),ne=Object(m.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items}}),{fetchPosts:Q,fetchUser:W,fetchComments:X})(te),se=function(e){Object(T.a)(s,e);var t=Object(I.a)(s);function s(e){var n;return Object(N.a)(this,s),(n=t.call(this,e)).state={postsViewable:4,commentsViewable:4,userIs:!1},n}return Object(P.a)(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchPosts,n=e.fetchComments;t(),n()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=(t.fetchComments,t.authorization);t.comments;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderDatePosted",value:function(e){var t=n(71)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(U.jsx)("small",{className:"text-muted",children:t})}},{key:"renderArticleContent",value:function(e,t){return e.length>1e3?Object(U.jsxs)("div",{children:[Object(U.jsx)("p",{className:"article-content",children:e.substr(0,1e3)}),Object(U.jsx)(K.a,{className:"mr-2",to:"/post/".concat(t),children:"Read More"})]}):Object(U.jsx)("div",{children:Object(U.jsx)("p",{className:"article-content",children:e})})}},{key:"handleDeleteComment",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(U.jsx)(ee,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(U.jsx)("div",{className:"mb-3",children:Object(U.jsxs)(K.a,{to:"/post/".concat(e,"#comment-length"),children:["Comments(",t.length,")"]})})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(U.jsx)(H.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(U.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments,s=this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"comment-content",children:[Object(U.jsxs)("div",{className:"comment-head",children:[Object(U.jsx)(K.a,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(U.jsx)("hr",{}),Object(U.jsx)("p",{className:"article-content",children:e.content})]})},e.id)})).slice(0,s)}},{key:"renderProfileImage",value:function(e){return Object(U.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderPostContent",value:function(){var e=this,t=this.state.postsViewable,n=this.props.match.params.username;return this.props.posts.filter((function(e){if(e["user.username"]===n)return!0})).map((function(t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)(F.a,{className:"content-section",children:[e.renderProfileImage(t["user.image_file"]),Object(U.jsxs)(F.a.Body,{children:[Object(U.jsxs)("div",{className:"article-metadata",children:[Object(U.jsx)(K.a,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted)]}),Object(U.jsx)("h2",{children:Object(U.jsx)(K.a,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),e.renderArticleContent(t.content,t.id)]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(U.jsx)("hr",{})]},t.id)})).slice(0,t)}},{key:"renderMorePosts",value:function(e){var t=e.target,n=this.state.postsViewable,s=this.props.posts;t.scrollHeight-t.scrollTop===t.clientHeight&&n!==s.length&&this.setState({postsViewable:n+2},(function(){console.log(n)}))}},{key:"render",value:function(){var e=this;return Object(U.jsx)("div",{className:"scrolling",onScroll:function(t){return e.renderMorePosts(t)},children:this.renderPostContent()})}}]),s}(s.Component),re=Object(j.d)(S.h,Object(m.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items}}),{fetchPosts:Q,fetchUser:W,fetchComments:X}))(se),ae=n(49),ce=function(e){Object(T.a)(s,e);var t=Object(I.a)(s);function s(e){var n;return Object(N.a)(this,s),(n=t.call(this,e)).state={modalToggle:!1,alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning",commentsViewable:4,userIs:!1},n}return Object(P.a)(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchPosts,n=e.fetchComments;t(),n()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=(t.fetchComments,t.authorization);t.comments;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertType,s=e.alertText;if(t)return Object(U.jsx)(G.a,{variant:n,children:s})}},{key:"handleModalToggle",value:function(){var e=this.state.modalToggle;this.setState({modalToggle:!e})}},{key:"handleDeletePost",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_post",data:{post_id:t}});case 4:n=e.sent,console.log(n),200===n.status?(localStorage.setItem("deletePost",!0),this.props.history.replace("/")):this.setState({alert:!0}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),this.setState({alert:!0});case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderDatePosted",value:function(e){var t=n(71)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(U.jsx)("small",{className:"text-muted",children:t})}},{key:"handleDeleteComment",value:function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(U.jsx)(ee,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(U.jsxs)("p",{id:"comment-length",children:["Comments(",t.length,")"]})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(U.jsx)(H.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(U.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments;this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"comment-content",children:[Object(U.jsxs)("div",{className:"comment-head",id:"comment-head",children:[Object(U.jsx)(C.b,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(U.jsx)("hr",{}),Object(U.jsx)("p",{className:"article-content",children:e.content})]})},e.id)}))}},{key:"renderProfileImage",value:function(e){return Object(U.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderEditButtons",value:function(e){var t=this,n=this.props.user.username,s=this.props.match.params.id;if(n===e&&localStorage.getItem("token"))return Object(U.jsxs)("div",{children:[Object(U.jsx)(H.a,{as:C.b,className:"mt-1 mb-1",size:"sm",to:"/update/post/".concat(s),children:"Update"}),Object(U.jsx)(H.a,{onClick:function(){return t.handleModalToggle()},className:"m-1",variant:"danger",size:"sm",children:"Delete"})]})}},{key:"renderPostContent",value:function(){var e=this,t=this.props.match.params.id;return this.props.posts.filter((function(e){if(e.id==t)return!0})).map((function(t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)(F.a,{className:"content-section",children:[e.renderProfileImage(t["user.image_file"]),Object(U.jsxs)(F.a.Body,{children:[Object(U.jsxs)("div",{className:"article-metadata",children:[Object(U.jsx)(C.b,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted),e.renderEditButtons(t["user.username"])]}),Object(U.jsx)("h2",{children:Object(U.jsx)(C.b,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),Object(U.jsx)("p",{className:"article-content",children:t.content})]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(U.jsx)("hr",{})]},t.id)}))}},{key:"render",value:function(){var e=this,t=this.state.modalToggle;return Object(U.jsxs)("div",{children:[this.renderAlert(),this.renderPostContent(),Object(U.jsx)(ae.a,{className:"fade",show:t,children:Object(U.jsxs)(ae.a.Dialog,{children:[Object(U.jsxs)(ae.a.Header,{children:[Object(U.jsx)(ae.a.Title,{children:"Delete Post?"}),Object(U.jsx)(H.a,{onClick:function(){return e.handleModalToggle()},variant:"close",children:Object(U.jsx)("span",{children:"\xd7"})})]}),Object(U.jsxs)(ae.a.Footer,{children:[Object(U.jsx)(H.a,{onClick:function(){return e.handleModalToggle()},variant:"secondary",children:"Close"}),Object(U.jsx)(H.a,{onClick:function(){return e.handleDeletePost()},variant:"danger",value:"delete",type:"submit",children:"Delete"})]})]})})]})}}]),s}(s.Component),oe=Object(j.d)(S.h,Object(m.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items}}),{fetchPosts:Q,fetchUser:W,fetchComments:X}))(ce);function ie(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)("Something went wrong, please try again later!"),c=Object(l.a)(a,2),u=c[0],m=(c[1],Object(S.f)());function j(){return(j=Object(i.a)(o.a.mark((function e(t){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.title.value.trim(),s=t.target.content.value.trim(),e.prev=3,e.next=6,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/new_post",data:{title:n,content:s}});case 6:a=e.sent,console.log(a),201===a.status?(localStorage.setItem("newPost",!0),m.replace("/")):r(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0.response),r(!0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){n&&n&&setTimeout((function(){r(!1)}),5e3)})),Object(U.jsxs)("div",{children:[function(){if(n)return Object(U.jsx)(G.a,{variant:"danger",children:u})}(),Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"New Post"}),Object(U.jsxs)(V.a,{onSubmit:function(e){return function(e){return j.apply(this,arguments)}(e)},children:[Object(U.jsxs)(V.a.Group,{controlId:"title",children:[Object(U.jsx)(V.a.Label,{children:"Title"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"title",placeholder:"Post Title"})]}),Object(U.jsxs)(V.a.Group,{controlId:"content",children:[Object(U.jsx)(V.a.Label,{children:"Content"}),Object(U.jsx)(V.a.Control,{required:!0,as:"textarea",rows:"10",size:"lg",type:"content",placeholder:"Post Content"})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Post"})]})]})]})}var le=function(e){Object(T.a)(n,e);var t=Object(I.a)(n);function n(e){var s;return Object(N.a)(this,n),(s=t.call(this,e)).state={modalToggle:!1,alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning"},s}return Object(P.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchPosts(),this.props.fetchUser()}},{key:"componentDidUpdate",value:function(){var e=this;this.state.alert&&setTimeout((function(){e.setState({alert:!1})}),5e3)}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertType,s=e.alertText;if(t)return Object(U.jsx)(G.a,{variant:n,children:s})}},{key:"handleUpdatePost",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,s,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.match.params.id,s=t.target.title.value.trim(),r=t.target.content.value.trim(),e.prev=4,e.next=7,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/update_post",data:{title:s,content:r,post_id:n}});case 7:a=e.sent,console.log(a),200===a.status?(localStorage.setItem("updatePost",!0),this.props.history.replace("/")):this.setState({alert:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0.response),this.setState({alert:!0});case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPostContent",value:function(){var e=this,t=this.props.match.params.id;return this.props.posts.filter((function(e){if(e.id==t)return!0})).map((function(t){return Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:t.title}),Object(U.jsxs)(V.a,{onSubmit:function(t){return e.handleUpdatePost(t)},children:[Object(U.jsxs)(V.a.Group,{controlId:"title",children:[Object(U.jsx)(V.a.Label,{children:"Title"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"title",defaultValue:t.title})]}),Object(U.jsxs)(V.a.Group,{controlId:"content",children:[Object(U.jsx)(V.a.Label,{children:"Content"}),Object(U.jsx)(V.a.Control,{required:!0,as:"textarea",rows:"10",size:"lg",type:"content",defaultValue:t.content})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Update"})]})]},t.id)}))}},{key:"render",value:function(){return Object(U.jsxs)("div",{children:[this.renderAlert(),this.renderPostContent()]})}}]),n}(s.Component),ue=Object(j.d)(S.h,Object(m.b)((function(e){return{posts:e.posts.items,user:e.users.item}}),{fetchPosts:Q,fetchUser:W}))(le);function de(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1],Object(s.useState)(!1)),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(s.useState)("Something went wrong, please try again later!"),m=Object(l.a)(u,2),j=m[0],h=m[1],p=Object(s.useState)("warning"),b=Object(l.a)(p,2),O=b[0],f=b[1];Object(S.f)();function x(){return(x=Object(i.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.email.value.trim(),e.prev=2,e.next=5,d()({method:"post",url:"/api/request_reset_email",data:{email:n}});case 5:s=e.sent,console.log(s),200===s.status?(c(!0),f("success"),h("Request Sent! Check Email For Password Reset Link!")):(c(!0),f("warning"),h("Something Went Wrong, Please Try Again Later!")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response),400===e.t0.response.status?(c(!0),f("warning"),h("No User Found By This Email! Try Again!")):(c(!0),f("danger"),h("Something Went Wrong, Please Try Again Later!"));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){a&&setTimeout((function(){c(!1)}),9e3)})),Object(U.jsxs)("div",{children:[function(){if(a)return Object(U.jsx)(G.a,{variant:O,children:j})}(),Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"Reset Password"}),Object(U.jsxs)(V.a,{onSubmit:function(e){return function(e){return x.apply(this,arguments)}(e)},children:[Object(U.jsxs)(V.a.Group,{controlId:"email",children:[Object(U.jsx)(V.a.Label,{children:"Email"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Account Email"})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Request Password Reset"})]})]})]})}function me(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)("Something went wrong, please try again later!"),c=Object(l.a)(a,2),u=c[0],m=c[1],j=Object(s.useState)("warning"),h=Object(l.a)(j,2),p=h[0],b=h[1],O=(Object(S.f)(),Object(S.g)().token);function f(){return(f=Object(i.a)(o.a.mark((function e(t){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.password.value,e.prev=2,e.next=5,d()({method:"post",url:"/api/reset_password",data:{password:n,token:O}});case 5:s=e.sent,console.log(s),200===s.status?(r(!0),b("success"),m("Password Has Been Reset!")):(r(!0),b("warning"),m("Something Went Wrong, Please Try Again Later!")),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),r(!0),b("danger"),m("Something Went Wrong, Please Try Again Later!");case 16:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){n&&setTimeout((function(){r(!1)}),5e3)})),Object(U.jsxs)("div",{children:[function(){if(n)return Object(U.jsx)(G.a,{variant:p,children:u})}(),Object(U.jsxs)("div",{className:"content-section",children:[Object(U.jsx)("legend",{className:"border-bottom mb-4",children:"New Password"}),Object(U.jsxs)(V.a,{onSubmit:function(e){return function(e){return f.apply(this,arguments)}(e)},children:[Object(U.jsxs)(V.a.Group,{controlId:"password",children:[Object(U.jsx)(V.a.Label,{children:"New Password"}),Object(U.jsx)(V.a.Control,{required:!0,size:"lg",type:"password",placeholder:"New Password"})]}),Object(U.jsx)(H.a,{variant:"outline-info",type:"submit",children:"Reset Password"})]})]})]})}var je=n(73);var he=function(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),c=Object(l.a)(a,2),u=c[0],j=c[1],h=Object(s.useState)("Welcome!"),p=Object(l.a)(h,2),b=p[0],O=p[1],f=localStorage.getItem("loginMessage"),x=localStorage.getItem("token");function g(){return(g=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=4;break}r(!1),e.next=15;break;case 4:return e.prev=4,e.next=7,d()({method:"get",url:"/api/verify_jwt",headers:{"x-access-token":localStorage.getItem("token")}});case 7:200===e.sent.status?(r(!0),j(!0),O("Login Successful! Welcome Back!")):(console.log("Token is invalid"),localStorage.removeItem("token")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("could not connect to authorization check"),localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[n||!x]),Object(U.jsx)(m.a,{store:k,children:Object(U.jsx)(C.a,{children:Object(U.jsxs)("div",{className:"main-body",children:[Object(U.jsx)(E,{authorization:n}),Object(U.jsx)(L.a,{children:Object(U.jsxs)(je.a,{children:[Object(U.jsxs)("div",{className:"col-md-8",children:[function(){if(u&&n&&f)return setTimeout((function(){j(!1),O("Welcome!"),localStorage.removeItem("loginMessage")}),5e3),Object(U.jsx)(G.a,{className:"alert-home",variant:"success",children:b})}(),Object(U.jsxs)(S.c,{children:[Object(U.jsx)(S.a,{exact:!0,path:"/",children:Object(U.jsx)(ne,{authorization:n})}),Object(U.jsx)(S.a,{path:"/home",children:Object(U.jsx)(ne,{authorization:n})}),Object(U.jsx)(S.a,{path:"/user_posts/:username",children:Object(U.jsx)(re,{authorization:n})}),Object(U.jsx)(S.a,{path:"/post/:id",children:Object(U.jsx)(oe,{authorization:n})}),Object(U.jsx)(S.a,{path:"/update/post/:id",children:Object(U.jsx)(ue,{})}),Object(U.jsx)(S.a,{path:"/about",children:Object(U.jsx)(M,{})}),Object(U.jsx)(S.a,{path:"/account",children:Object(U.jsx)(Z,{})}),Object(U.jsx)(S.a,{path:"/forgot_password",children:Object(U.jsx)(de,{})}),Object(U.jsx)(S.a,{path:"/reset_password/:token",children:Object(U.jsx)(me,{})}),Object(U.jsx)(S.a,{path:"/register",children:Object(U.jsx)(q,{})}),Object(U.jsx)(S.a,{path:"/new_post",children:Object(U.jsx)(ie,{})}),Object(U.jsx)(S.a,{path:"/login",children:Object(U.jsx)(Y,{})}),Object(U.jsx)(S.a,{path:"/logout",children:Object(U.jsx)(R,{})})]})]}),Object(U.jsx)(B,{})]})})]})})})};a.a.render(Object(U.jsx)(he,{}),document.getElementById("root"))},23:function(e,t,n){},92:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.116ae1ac.chunk.js.map