(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{130:function(e,t,n){},180:function(e,t){},21:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(37),a=n.n(r),c=(n(130),n(8)),i=n.n(c),o=n(11),l=n(13),u=n(9),d=n.n(u),h=n(19),j="FETCH_POSTS",m="FETCH_USER",p="FETCH_COMMENTS",b="FETCH_LIKES",f="FETCH_DISLIKES",O="FETCH_NOTIFICATIONS",x=function(){return function(e){d()({method:"get",url:"/api/posts"}).then((function(t){e({type:j,payload:t.data})}))}},v=function(){return function(e){d()({method:"get",url:"/api/get_user",headers:{"x-access-token":localStorage.getItem("token")}}).then((function(t){e({type:m,payload:t.data})}))}},g=function(){return function(e){d()({method:"get",url:"/api/comments"}).then((function(t){e({type:p,payload:t.data})}))}},k=function(){return function(e){d()({method:"get",url:"/api/notifications"}).then((function(t){e({type:O,payload:t.data})}))}},y=function(){return function(e){d()({method:"get",url:"/api/likes"}).then((function(t){e({type:b,payload:t.data})}))}},w=function(){return function(e){d()({method:"get",url:"/api/dislikes"}).then((function(t){e({type:f,payload:t.data})}))}},N=n(10),C=n(18),S=(n(21),n(60)),T=n(36),_=n(38),P=n(72),I=n(7),L=n(1);function z(e){var t=Object(C.f)();return Object(L.jsx)("div",{children:Object(L.jsx)(S.a,{expand:"md",bg:"color",variant:"dark",collapseOnSelect:!0,children:Object(L.jsxs)(P.a,{children:[Object(L.jsx)("img",{width:30,height:30,className:"zencircle",src:"https://zennitapp.s3.amazonaws.com/zencircle.png",alt:"zennit zen circle"}),Object(L.jsx)(S.a.Brand,{as:N.b,className:"mr-4",to:"/home",children:"Zennit"}),Object(L.jsx)(S.a.Toggle,{"aria-controls":"navbarToggle"}),Object(L.jsxs)(S.a.Collapse,{id:"navbarToggle",children:[Object(L.jsx)(T.a,{className:"mr-auto",children:Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/home",children:"Home"})})}),Object(L.jsx)(I.a,{className:"form-inline justify-content-center",onSubmit:function(e){return function(e){e.preventDefault();var n=e.target.formSearch.value;t.replace("/search/".concat(n))}(e)},children:Object(L.jsx)(I.a.Group,{controlId:"formSearch",children:Object(L.jsx)(I.a.Control,{size:"sm",type:"search",placeholder:"Search Posts"})})}),e.authorization?Object(L.jsxs)(T.a,{children:[Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/new_post",children:"New Post"})}),Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/account",children:"Account"})}),Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/logout",children:"Logout"})})]}):Object(L.jsxs)(T.a,{children:[Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/login",children:"Login"})}),Object(L.jsx)(_.a,{children:Object(L.jsx)(T.a.Link,{as:N.b,to:"/register",children:"Register"})})]})]})]})})})}var D=n(14),E=n(15),M=n(17),A=n(16),B=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"About Zennit"}),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("h2",{children:"A communication platform for today's social zennist!"}),Object(L.jsx)("p",{children:"Zennit was born out of an appreciation for online social discussion regarding Zen. Many Zen-enthusiast online-communities have started in places like: reddit and discord... however, these places did not capture the type of niche online presence that is demanded of such a controversial and perturbing topic. This forum is dedicated to the rigorous discussion of Zen and its related content."}),Object(L.jsx)("p",{children:'To echo our reddit family motto: "The self-nature is originally complete!"'}),Object(L.jsx)("p",{children:"Zen, as we understand it here, was born of the Buddhist lineage of Bodhidharma, and has passed through the minds of the Song and Tang dynasty patriarchs, so as to fill our skulls with the enlightened brilliance of the true teaching of the Buddha."}),Object(L.jsx)("p",{children:"This forum is not present as an online educational resource for the history of Zen, but the users here are often willing to share their knowledge with those who seek to understand Zen's dubious past."})]})]})}}]),n}(s.Component),U=n(61),H=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return Object(L.jsx)("div",{className:"col-md-4",children:Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("h3",{children:"Expedients"}),Object(L.jsx)("div",{className:"text-muted",children:Object(L.jsxs)(U.a,{children:[Object(L.jsx)(U.a.Item,{children:Object(L.jsx)(N.b,{to:"/about",children:"About"})}),Object(L.jsx)(U.a.Item,{children:Object(L.jsx)(N.b,{to:"/rules",children:"Rules"})}),Object(L.jsx)(U.a.Item,{children:Object(L.jsx)(N.b,{to:"/resources",children:"Resources"})})]})})]})})}}]),n}(s.Component),Y=n(12);function V(e){var t=Object(C.f)();function n(){return(n=Object(o.a)(i.a.mark((function e(n){var s,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t.push("/login"),s=n.target.username.value.trim(),r=n.target.email.value.trim(),a=n.target.password.value,e.prev=5,e.next=8,d()({method:"post",url:"/api/register",data:{username:s,email:r,password:a}});case 8:c=e.sent,console.log(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"Join Zennit!"}),Object(L.jsxs)(I.a,{onSubmit:function(e){return function(e){return n.apply(this,arguments)}(e)},children:[Object(L.jsxs)(I.a.Group,{controlId:"username",children:[Object(L.jsx)(I.a.Label,{children:"Username"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"username",placeholder:"Username"}),Object(L.jsx)(I.a.Text,{id:"passwordHelpBlock",muted:!0,children:"Your username must be shorter than 20 characters."})]}),Object(L.jsxs)(I.a.Group,{controlId:"email",children:[Object(L.jsx)(I.a.Label,{children:"Email"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Enter email"}),Object(L.jsx)(I.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(L.jsxs)(I.a.Group,{controlId:"password",children:[Object(L.jsx)(I.a.Label,{children:"Password"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"password",placeholder:"Password","aria-describedby":"passwordHelpBlock"}),Object(L.jsx)(I.a.Text,{id:"passwordHelpBlock",muted:!0,children:"Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji."})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Sign Up"})]})]}),Object(L.jsx)("div",{className:"border-top pt-3",children:Object(L.jsxs)("small",{className:"text-muted",children:["Already Have An Account? ",Object(L.jsx)(N.b,{className:"ml-2",to:"/login",children:"Sign In"})]})})]})}var R=n(22);function q(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),r=Object(s.useState)(!1),a=Object(l.a)(r,2),c=a[0],u=a[1],h=Object(s.useState)("warning"),j=Object(l.a)(h,2),m=j[0],p=j[1],b=Object(s.useState)("Something went wrong, please try again later!"),f=Object(l.a)(b,2),O=f[0],x=f[1],v=Object(C.f)();function g(){return(g=Object(o.a)(i.a.mark((function e(t){var s,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=t.target.email.value.trim(),r=t.target.password.value,e.prev=3,e.next=6,d()({method:"post",url:"/api/login",data:{email:s,password:r}});case 6:a=e.sent,console.log(a),200===a.status?(c=a.data.token,localStorage.setItem("token","Bearer "+c),localStorage.setItem("loginMessage",!0),n(!0),v.replace("/"),v.go("/")):(n(!1),u(!0),p("warning"),x("Something went wrong, please try again later!")),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),n(!1),console.log(e.t0.response),400===e.t0.response.status?(u(!0),p("warning"),x("Incorrect Email or Password")):(u(!0),p("danger"),x("Something went wrong, please try again later!"));case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){c&&setTimeout((function(){u(!1)}),5e3)})),Object(L.jsxs)("div",{children:[function(){if(c)return Object(L.jsx)(R.a,{variant:m,children:O})}(),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"Login"}),Object(L.jsxs)(I.a,{onSubmit:function(e){return function(e){return g.apply(this,arguments)}(e)},children:[Object(L.jsxs)(I.a.Group,{controlId:"email",children:[Object(L.jsx)(I.a.Label,{children:"Email"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Account Email"})]}),Object(L.jsxs)(I.a.Group,{controlId:"password",children:[Object(L.jsx)(I.a.Label,{children:"Password"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"password",placeholder:"Account Password"})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Login"}),Object(L.jsx)("small",{className:"text-muted ml-2",children:Object(L.jsx)(N.b,{to:"/forgot_password",children:"Forgot Password?"})})]})]}),Object(L.jsx)("div",{className:"border-top pt-3",children:Object(L.jsxs)("small",{className:"text-muted",children:["Need An Account? ",Object(L.jsx)(N.b,{className:"ml-2",to:"/register",children:"Sign Up Here!"})]})})]})}function G(){var e=Object(C.f)();return Object(s.useEffect)((function(){localStorage.removeItem("token"),localStorage.removeItem("loginMessage"),e.push("/"),e.go("/")})),Object(L.jsx)("div",{})}var F=n(24),W=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(D.a)(this,n),(s=t.call(this,e)).state={alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning",submission:!1},s}return Object(E.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.state.submission&&(this.props.fetchUser(),this.setState({submission:!1})),this.state.alert&&setTimeout((function(){e.setState({alert:!1})}),5e3)}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertText,s=e.alertType;if(t)return Object(L.jsx)(R.a,{variant:s,children:n})}},{key:"handleSubmit",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,s,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.email.value.trim(),s=t.target.username.value.trim(),r=t.target.imageUpload.files[0],(a=new FormData(t.target)).append("username",s),a.append("email",n),a.append("image_file",r),e.prev=8,e.next=11,d()({headers:{"x-access-token":localStorage.getItem("token"),"Content-Type":"multipart/form-data"},method:"post",url:"/api/update_user",data:a});case 11:200===e.sent.status?this.setState({alert:!0,alertType:"success",alertText:"Successfully updated account info!",submission:!0}):this.setState({alert:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),e.t0.response?(console.log(e.t0.response),400===e.t0.response.status?this.setState({alert:!0,alertType:"danger",alertText:"There was an issue updating your information, please try again later!"}):500===e.t0.response.status&&this.setState({alert:!0})):this.setState({alert:!0});case 18:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.user;return Object(L.jsxs)("div",{children:[this.renderAlert(),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsxs)(F.a,{children:[Object(L.jsx)("img",{width:64,height:64,className:"rounded-circle account-img",src:"https://zennitapp.s3.amazonaws.com/".concat(t.image_file),alt:"Current User Profile Avatar"}),Object(L.jsxs)(F.a.Body,{children:[Object(L.jsx)("h2",{className:"account-heading",children:t.username}),Object(L.jsx)("p",{className:"text-secondary",children:t.email})]})]}),Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"Account Info"}),Object(L.jsxs)(I.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(L.jsxs)(I.a.Group,{controlId:"email",children:[Object(L.jsx)(I.a.Label,{children:"Email"}),Object(L.jsx)(I.a.Control,{size:"lg",type:"email",placeholder:"New Email"})]}),Object(L.jsxs)(I.a.Group,{controlId:"username",children:[Object(L.jsx)(I.a.Label,{children:"Username"}),Object(L.jsx)(I.a.Control,{size:"lg",type:"username",placeholder:"New Username"}),Object(L.jsx)(I.a.Text,{id:"passwordHelpBlock",muted:!0,children:"Your username must be shorter than 20 characters."})]}),Object(L.jsxs)(I.a.Group,{children:[Object(L.jsx)(I.a.File,{id:"imageUpload",label:"Update Profile Picture",accept:".png, .jpg, .jpeg","aria-describedby":"imageHelpBlock",name:"image_file"}),Object(L.jsx)(I.a.Text,{id:"imagedHelpBlock",muted:!0,children:"Your image must be a common format such as: .png .jpg .jpeg"})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Update"})]})]})]})}}]),n}(s.Component),Z=Object(h.b)((function(e){return{user:e.users.item}}),{fetchUser:v})(W),J=n(23),K=n(35),Q=n.n(K),X=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(D.a)(this,n),(s=t.call(this,e)).state={commentsViewable:4,alert:!1,alertType:"warning",alertText:"Something went wrong, please try again later!"},s}return Object(E.a)(n,[{key:"makeNotification",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,s=t.post_id,r=t.user_id,e.prev=3,e.next=6,d()({method:"post",url:"/api/new_notification",data:{notification_type:"comment",user_id:r,post_id:s,comment_id:n}});case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.post,s=t.target.comment.value.trim(),t.preventDefault(),e.prev=3,e.next=6,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/new_comment",data:{post_id:n,content:s}});case 6:201===(r=e.sent).status?(this.props.fetchComments(),this.makeNotification(r.data),this.setState({alert:!0,alertType:"success",alertText:"Comment Successfully Created!"})):this.setState({alert:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.response?(console.log(e.t0.response),400===e.t0.response.status?this.setState({alert:!0,alertType:"warning",alertText:"Please login to comment!"}):500===e.t0.response.status&&this.setState({alert:!0,alertType:"warning",alertText:"Something went wrong, please try again later!"})):this.setState({alert:!0,alertType:"warning",alertText:"Something went wrong, please try again later!"});case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderAlert",value:function(){var e=this,t=this.state,n=t.alert,s=t.alertText,r=t.alertType;if(n)return setTimeout((function(){e.setState({alert:!1,alertType:"warning",alertText:"Please login to comment!"})}),5e3),Object(L.jsx)(R.a,{variant:r,children:s})}},{key:"render",value:function(){var e=this,t=this.props.user;return Object(L.jsxs)("div",{children:[this.renderAlert(),Object(L.jsxs)(F.a,{children:[Object(L.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(t.image_file),alt:"current user"}),Object(L.jsxs)(I.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(L.jsx)(I.a.Group,{controlId:"comment",children:Object(L.jsx)(I.a.Control,{required:!0,as:"textarea",size:"md",cols:"55",type:"comment",placeholder:"Expound the dharma..."})}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Comment"})]})]})]})}}]),n}(s.Component),$=Object(h.b)((function(e){return{comments:e.comments.items}}),{fetchComments:g})(X),ee=n(46),te=n(47);var ne=Object(h.b)((function(e){return{likes:e.likes.likes,dislikes:e.likes.dislikes,user:e.users.item}}),{fetchLikes:y,fetchDislikes:w,fetchUser:v})((function(e){var t=e.likes,n=e.dislikes,s=e.user,r=e.post,a=t.filter((function(e){if(e.user_id===s.id&&e.post_id===r)return!0})),c=n.filter((function(e){if(e.user_id===s.id&&e.post_id===r)return!0}));function l(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(i.a.mark((function t(){var n,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.post,s=e.fetchLikes,r=e.fetchDislikes,0!==Object.keys(a).length&&0===Object.keys(c).length){t.next=12;break}return t.prev=2,t.next=5,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/add_like",data:{post_id:n}});case 5:201===t.sent.status&&(s(),r(),v()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:if(0===Object.keys(a).length){t.next=23;break}return t.prev=13,t.next=16,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/remove_like"});case 16:200===t.sent.status&&(s(),r(),v()),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(13),console.log(t.t1);case 23:if(0===Object.keys(c).length){t.next=34;break}return t.prev=24,t.next=27,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/remove_dislike"});case 27:200===t.sent.status&&(s(),r(),v()),t.next=34;break;case 31:t.prev=31,t.t2=t.catch(24),console.log(t.t2);case 34:case"end":return t.stop()}}),t,null,[[2,9],[13,20],[24,31]])})))).apply(this,arguments)}function h(){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function t(){var n,s,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.post,s=e.fetchLikes,r=e.fetchDislikes,0!==Object.keys(c).length&&0===Object.keys(a).length){t.next=12;break}return t.prev=2,t.next=5,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/add_dislike",data:{post_id:n}});case 5:201===t.sent.status&&(s(),r(),v()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:if(0===Object.keys(c).length){t.next=23;break}return t.prev=13,t.next=16,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/remove_dislike"});case 16:200===t.sent.status&&(s(),r(),v()),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(13),console.log(t.t1);case 23:if(0===Object.keys(a).length){t.next=34;break}return t.prev=24,t.next=27,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/remove_like"});case 27:200===t.sent.status&&(s(),r(),v()),t.next=34;break;case 31:t.prev=31,t.t2=t.catch(24),console.log(t.t2);case 34:case"end":return t.stop()}}),t,null,[[2,9],[13,20],[24,31]])})))).apply(this,arguments)}return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{style:{margin:"17px"},children:function(){var t=e.likes,n=e.dislikes,s=e.post,r=t.filter((function(e){if(e.post_id==s)return!0})),a=n.filter((function(e){if(e.post_id==s)return!0}));return r.length-a.length}()}),0!==Object.keys(a).length?Object(L.jsxs)("div",{className:"like-buttons",children:[Object(L.jsx)("div",{style:{color:"purple"},onClick:function(){return l()},children:Object(L.jsx)(ee.a,{icon:te.b,size:"2x"})}),Object(L.jsx)("div",{onClick:function(){return h()},children:Object(L.jsx)(ee.a,{icon:te.a,size:"2x"})})]}):0!==Object.keys(c).length?Object(L.jsxs)("div",{className:"like-buttons",children:[Object(L.jsx)("div",{onClick:function(){return l()},children:Object(L.jsx)(ee.a,{icon:te.b,size:"2x"})}),Object(L.jsx)("div",{style:{color:"purple"},onClick:function(){return h()},children:Object(L.jsx)(ee.a,{icon:te.a,size:"2x"})})]}):Object(L.jsxs)("div",{className:"like-buttons",children:[Object(L.jsx)("div",{onClick:function(){return l()},children:Object(L.jsx)(ee.a,{icon:te.b,size:"2x"})}),Object(L.jsx)("div",{onClick:function(){return h()},children:Object(L.jsx)(ee.a,{icon:te.a,size:"2x"})})]})]})})),se=n(89);function re(e){var t=Object(s.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(s.useState)(5),u=Object(l.a)(c,2),h=u[0],j=u[1],m=e.notifications.filter((function(t){if(t["post.user_id"]===e.user.id&&!1===t.has_been_read&&t.user_id!==e.user.id)return!0}));function p(){return(p=Object(o.a)(i.a.mark((function t(n,s){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.fetchNotifications,t.prev=1,t.next=4,d()({method:"post",url:"/api/update_notification",data:{notification_id:s,has_been_read:!0}});case 4:200===t.sent.status&&r(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function b(){var e=m.map((function(e){return Object(L.jsx)(J.a,{style:{textDecoration:"none",color:"purple"},to:"/post/".concat(e.post_id,"#comment-length"),onClick:function(t){return function(e,t){return p.apply(this,arguments)}(t,e.id)},children:Object(L.jsxs)("div",{className:"notification px-1 mt-2 mb-2",children:['New comment from "',e["user.username"],'" on your post "',e["post.title"],'"']},e.id)})}));return 0===e.length?Object(L.jsx)("p",{className:"mt-2",children:"No New Notifications!"}):e.slice(0,h)}return Object(L.jsxs)("div",{children:[function(){var t=e.user;if(r&&t)return Object(L.jsx)("div",{className:"notifications-box scrolling p-0",onScroll:function(e){return function(e){var t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&(j(h+5),console.log(h))}(e)},children:b()})}(),Object(L.jsxs)("div",{className:"position-fixed notifications-btn",children:[function(){if(m.length>0)return Object(L.jsx)(se.a,{className:"popover-style position-relative",placement:"top",children:Object(L.jsx)(se.a.Content,{children:m.length})})}(),Object(L.jsx)(Y.a,{variant:"info",onClick:function(){a(!r)},children:"Notifications"})]})]})}var ae=n(40),ce=function(e){Object(M.a)(s,e);var t=Object(A.a)(s);function s(e){var n;return Object(D.a)(this,s),(n=t.call(this,e)).state={postsViewable:4,commentsViewable:4,userIs:!1},n}return Object(E.a)(s,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=t.authorization;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderLoader",value:function(){var e=this.props.posts;if(0===Object.keys(e).length)return Object(L.jsx)(ae.a,{animation:"border",style:{margin:"30px"}})}},{key:"renderDatePosted",value:function(e){var t=n(64)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(L.jsx)("small",{className:"text-muted",children:t})}},{key:"renderArticleContent",value:function(e,t){return e.length>1e3?Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"article-content",children:Q()(e.substr(0,1e3))}),Object(L.jsx)(J.a,{className:"mr-2",to:"/post/".concat(t),children:"Read More"})]}):Object(L.jsx)("div",{className:"article-content",children:Q()(e)})}},{key:"handleDeleteComment",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)($,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(L.jsx)("div",{className:"mb-3",children:Object(L.jsxs)(J.a,{to:"/post/".concat(e,"#comment-length"),children:["Comments(",t.length,")"]})})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(L.jsx)(Y.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(L.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments,s=this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(L.jsx)("div",{children:Object(L.jsxs)("div",{className:"comment-content",children:[Object(L.jsxs)("div",{className:"comment-head",children:[Object(L.jsx)(J.a,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{className:"article-content",children:e.content})]})},e.id)})).slice(0,s)}},{key:"renderProfileImage",value:function(e){return Object(L.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderLikeButtons",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)(ne,{post:e.id})}},{key:"renderPostContent",value:function(){var e=this,t=this.state.postsViewable;return this.props.posts.map((function(t){return Object(L.jsxs)("div",{children:[Object(L.jsxs)(F.a,{className:"content-section",children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[e.renderProfileImage(t["user.image_file"]),e.renderLikeButtons(t)]}),Object(L.jsxs)(F.a.Body,{children:[Object(L.jsxs)("div",{className:"article-metadata",children:[Object(L.jsx)(J.a,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted)]}),Object(L.jsx)("h2",{children:Object(L.jsx)(J.a,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),Object(L.jsx)("hr",{}),e.renderArticleContent(t.content,t.id)]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(L.jsx)("hr",{})]},t.id)})).slice(0,t)}},{key:"renderMorePosts",value:function(e){var t=e.target,n=this.state.postsViewable;t.scrollHeight-t.scrollTop===t.clientHeight&&this.setState({postsViewable:n+2},(function(){console.log(n)}))}},{key:"renderNotificationsButton",value:function(){var e=this.props,t=e.user,n=e.notifications,s=e.fetchNotifications;if(0!==Object.keys(t).length)return Object(L.jsx)(re,{user:t,notifications:n,fetchNotifications:s})}},{key:"render",value:function(){var e=this;return Object(L.jsx)("div",{children:Object(L.jsxs)("div",{className:"scrolling",onScroll:function(t){return e.renderMorePosts(t)},children:[this.renderLoader(),this.renderPostContent()]})})}}]),s}(s.Component),ie=Object(h.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items,notifications:e.notifications.items}}),{fetchPosts:x,fetchUser:v,fetchComments:g,fetchNotifications:k})(ce),oe=n(27),le=function(e){Object(M.a)(s,e);var t=Object(A.a)(s);function s(e){var n;return Object(D.a)(this,s),(n=t.call(this,e)).state={postsViewable:4,commentsViewable:4,userIs:!1},n}return Object(E.a)(s,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=(t.fetchComments,t.authorization);t.comments;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderLoader",value:function(){var e=this.props.posts;if(0===Object.keys(e).length)return Object(L.jsx)(ae.a,{animation:"border",style:{margin:"30px"}})}},{key:"renderDatePosted",value:function(e){var t=n(64)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(L.jsx)("small",{className:"text-muted",children:t})}},{key:"renderArticleContent",value:function(e,t){return e.length>1e3?Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"article-content",children:Q()(e.substr(0,1e3))}),Object(L.jsx)(J.a,{className:"mr-2",to:"/post/".concat(t),children:"Read More"})]}):Object(L.jsx)("div",{className:"article-content",children:Q()(e)})}},{key:"handleDeleteComment",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)($,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(L.jsx)("div",{className:"mb-3",children:Object(L.jsxs)(J.a,{to:"/post/".concat(e,"#comment-length"),children:["Comments(",t.length,")"]})})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(L.jsx)(Y.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(L.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments,s=this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(L.jsx)("div",{children:Object(L.jsxs)("div",{className:"comment-content",children:[Object(L.jsxs)("div",{className:"comment-head",children:[Object(L.jsx)(J.a,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{className:"article-content",children:e.content})]})},e.id)})).slice(0,s)}},{key:"renderProfileImage",value:function(e){return Object(L.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderLikeButtons",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)(ne,{post:e.id})}},{key:"renderPostContent",value:function(){var e=this,t=this.state.postsViewable,n=this.props.match.params.username;return this.props.posts.filter((function(e){if(e["user.username"]===n)return!0})).map((function(t){return Object(L.jsxs)("div",{children:[Object(L.jsxs)(F.a,{className:"content-section",children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[e.renderProfileImage(t["user.image_file"]),e.renderLikeButtons(t)]}),Object(L.jsxs)(F.a.Body,{children:[Object(L.jsxs)("div",{className:"article-metadata",children:[Object(L.jsx)(J.a,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted)]}),Object(L.jsx)("h2",{children:Object(L.jsx)(J.a,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),Object(L.jsx)("hr",{}),e.renderArticleContent(t.content,t.id)]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(L.jsx)("hr",{})]},t.id)})).slice(0,t)}},{key:"renderMorePosts",value:function(e){var t=e.target,n=this.state.postsViewable;t.scrollHeight-t.scrollTop===t.clientHeight&&this.setState({postsViewable:n+2},(function(){console.log(n)}))}},{key:"render",value:function(){var e=this,t=this.props.match.params.username;return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:t}),this.renderLoader(),Object(L.jsx)("div",{className:"scrolling",onScroll:function(t){return e.renderMorePosts(t)},children:this.renderPostContent()})]})}}]),s}(s.Component),ue=Object(oe.d)(C.h,Object(h.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items}}),{fetchPosts:x,fetchUser:v,fetchComments:g}))(le),de=n(53),he=function(e){Object(M.a)(s,e);var t=Object(A.a)(s);function s(e){var n;return Object(D.a)(this,s),(n=t.call(this,e)).state={modalToggle:!1,alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning",commentsViewable:4,userIs:!1},n}return Object(E.a)(s,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.user,s=t.fetchUser,r=(t.fetchComments,t.authorization);t.comments;e.authorization!==r&&s(),e.user!==n&&this.renderNewComment()}},{key:"renderLoader",value:function(){var e=this.props.posts;if(0===Object.keys(e).length)return Object(L.jsx)(ae.a,{animation:"border",style:{margin:"30px"}})}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertType,s=e.alertText;if(t)return Object(L.jsx)(R.a,{variant:n,children:s})}},{key:"handleModalToggle",value:function(){var e=this.state.modalToggle;this.setState({modalToggle:!e})}},{key:"handleDeletePost",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.prev=1,e.next=4,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_post",data:{post_id:t}});case 4:n=e.sent,console.log(n),200===n.status?(localStorage.setItem("deletePost",!0),this.props.history.replace("/"),this.props.history.go("/")):this.setState({alert:!0}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),this.setState({alert:!0});case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderDatePosted",value:function(e){var t=n(64)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(L.jsx)("small",{className:"text-muted",children:t})}},{key:"handleDeleteComment",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/delete_comment",data:{comment_id:t}});case 3:200===e.sent.status&&this.props.fetchComments(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNewComment",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)($,{post:e,user:t})}},{key:"renderCommentsLength",value:function(e){var t=this.props.comments.filter((function(t){if(t.post_id==e)return!0}));return Object(L.jsxs)("p",{id:"comment-length",children:["Comments(",t.length,")"]})}},{key:"renderCommentEditButtons",value:function(e,t){var n=this;if(this.props.user.username===e&&localStorage.getItem("token"))return Object(L.jsx)(Y.a,{className:"ml-auto delete-comment",onClick:function(){return n.handleDeleteComment(t)},variant:"outline-danger",size:"sm",children:Object(L.jsx)("span",{children:"\xd7"})})}},{key:"renderComments",value:function(e){var t=this,n=this.props.comments;this.state.commentsViewable;return n.filter((function(t){if(t.post_id==e)return!0})).map((function(e){return Object(L.jsx)("div",{children:Object(L.jsxs)("div",{className:"comment-content",children:[Object(L.jsxs)("div",{className:"comment-head",id:"comment-head",children:[Object(L.jsx)(N.b,{className:"mr-2",to:"/user_posts/".concat(e["user.username"]),children:e["user.username"]}),t.renderDatePosted(e.date_posted),t.renderCommentEditButtons(e["user.username"],e.id)]}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{className:"article-content",children:e.content})]})},e.id)}))}},{key:"renderProfileImage",value:function(e){return Object(L.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderEditButtons",value:function(e){var t=this,n=this.props.user.username,s=this.props.match.params.id;if(n===e&&localStorage.getItem("token"))return Object(L.jsxs)("div",{children:[Object(L.jsx)(Y.a,{as:N.b,className:"mt-1 mb-1",size:"sm",to:"/update/post/".concat(s),children:"Update"}),Object(L.jsx)(Y.a,{onClick:function(){return t.handleModalToggle()},className:"m-1",variant:"danger",size:"sm",children:"Delete"})]})}},{key:"renderLikeButtons",value:function(e){var t=this.props.user;if(0!==Object.keys(t).length)return Object(L.jsx)(ne,{post:e.id})}},{key:"renderPostContent",value:function(){var e=this,t=this.props.match.params.id;return this.props.posts.filter((function(e){if(e.id==t)return!0})).map((function(t){return Object(L.jsxs)("div",{children:[Object(L.jsxs)(F.a,{className:"content-section",children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[e.renderProfileImage(t["user.image_file"]),e.renderLikeButtons(t)]}),Object(L.jsxs)(F.a.Body,{children:[Object(L.jsxs)("div",{className:"article-metadata",children:[Object(L.jsx)(N.b,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted),e.renderEditButtons(t["user.username"])]}),Object(L.jsx)("h2",{children:Object(L.jsx)(N.b,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),Object(L.jsx)("hr",{}),Object(L.jsx)("div",{className:"article-content",children:Q()(t.content)})]})]}),e.renderCommentsLength(t.id),e.renderComments(t.id),e.renderNewComment(t.id),Object(L.jsx)("hr",{})]},t.id)}))}},{key:"render",value:function(){var e=this,t=this.state.modalToggle;return Object(L.jsxs)("div",{children:[this.renderLoader(),this.renderAlert(),this.renderPostContent(),Object(L.jsx)(de.a,{className:"fade",show:t,children:Object(L.jsxs)(de.a.Dialog,{children:[Object(L.jsxs)(de.a.Header,{children:[Object(L.jsx)(de.a.Title,{children:"Delete Post?"}),Object(L.jsx)(Y.a,{onClick:function(){return e.handleModalToggle()},variant:"close",children:Object(L.jsx)("span",{children:"\xd7"})})]}),Object(L.jsxs)(de.a.Footer,{children:[Object(L.jsx)(Y.a,{onClick:function(){return e.handleModalToggle()},variant:"secondary",children:"Close"}),Object(L.jsx)(Y.a,{onClick:function(){return e.handleDeletePost()},variant:"danger",value:"delete",type:"submit",children:"Delete"})]})]})})]})}}]),s}(s.Component),je=Object(oe.d)(C.h,Object(h.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items}}),{fetchPosts:x,fetchUser:v,fetchComments:g}))(he),me=n(75),pe=n(76),be=n.n(pe);function fe(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),c=Object(l.a)(a,2),u=c[0],h=c[1],j=Object(s.useState)("Something went wrong, please try again later!"),m=Object(l.a)(j,2),p=m[0],b=(m[1],Object(C.f)());function f(){return(f=Object(o.a)(i.a.mark((function e(t){var s,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=t.target.title.value.trim(),r=n.trim(),e.prev=3,e.next=6,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/new_post",data:{title:s,content:r}});case 6:a=e.sent,console.log(a),201===a.status?(localStorage.setItem("newPost",!0),b.replace("/"),b.go("/")):h(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0.response),h(!0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){u&&u&&setTimeout((function(){h(!1)}),5e3)})),Object(L.jsxs)("div",{children:[function(){if(u)return Object(L.jsx)(R.a,{variant:"danger",children:p})}(),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"New Post"}),Object(L.jsxs)(I.a,{onSubmit:function(e){return function(e){return f.apply(this,arguments)}(e)},children:[Object(L.jsxs)(I.a.Group,{controlId:"title",children:[Object(L.jsx)(I.a.Label,{children:"Title"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"title",placeholder:"Post Title"})]}),Object(L.jsxs)(I.a.Group,{controlId:"content",children:[Object(L.jsx)(I.a.Label,{children:"Content"}),Object(L.jsx)(I.a.Control,{required:!0,as:me.CKEditor,type:"content",editor:be.a,onChange:function(e,t){var n=t.getData();r(n)},data:n,config:{toolbar:["heading","bold","italic","link","numberedList","bulletedList","blockQuote"]}})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Post"})]})]})]})}var Oe=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(D.a)(this,n),(s=t.call(this,e)).state={modalToggle:!1,alert:!1,alertText:"Something went wrong, please try again later!",alertType:"warning",value:""},s}return Object(E.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.state.alert&&setTimeout((function(){e.setState({alert:!1})}),5e3)}},{key:"renderAlert",value:function(){var e=this.state,t=e.alert,n=e.alertType,s=e.alertText;if(t)return Object(L.jsx)(R.a,{variant:n,children:s})}},{key:"handleUpdatePost",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,s,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.match.params.id,s=t.target.title.value.trim(),r=this.state.value.trim(),e.prev=4,e.next=7,d()({headers:{"x-access-token":localStorage.getItem("token")},method:"post",url:"/api/update_post",data:{title:s,content:r,post_id:n}});case 7:a=e.sent,console.log(a),200===a.status?(localStorage.setItem("updatePost",!0),this.props.history.replace("/"),this.props.history.go("/")):this.setState({alert:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0.response),this.setState({alert:!0});case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderPostContent",value:function(){var e=this,t=this.props.match.params.id;return this.props.posts.filter((function(e){if(e.id==t)return!0})).map((function(t){return Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:t.title}),Object(L.jsxs)(I.a,{onSubmit:function(t){return e.handleUpdatePost(t)},children:[Object(L.jsxs)(I.a.Group,{controlId:"title",children:[Object(L.jsx)(I.a.Label,{children:"Title"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"title",defaultValue:t.title})]}),Object(L.jsxs)(I.a.Group,{controlId:"content",children:[Object(L.jsx)(I.a.Label,{children:"Content"}),Object(L.jsx)(I.a.Control,{required:!0,as:me.CKEditor,type:"content",editor:be.a,onChange:function(t,n){return e.handleChange(t,n)},data:e.state.value||t.content,config:{toolbar:["heading","bold","italic","link","numberedList","bulletedList","blockQuote"]}})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Update"})]})]},t.id)}))}},{key:"handleChange",value:function(e,t){var n=t.getData();this.setState({value:n})}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[this.renderAlert(),this.renderPostContent()]})}}]),n}(s.Component),xe=Object(oe.d)(C.h,Object(h.b)((function(e){return{posts:e.posts.items,user:e.users.item}}),{fetchPosts:x,fetchUser:v}))(Oe);function ve(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1],Object(s.useState)(!1)),r=Object(l.a)(n,2),a=r[0],c=r[1],u=Object(s.useState)("Something went wrong, please try again later!"),h=Object(l.a)(u,2),j=h[0],m=h[1],p=Object(s.useState)("warning"),b=Object(l.a)(p,2),f=b[0],O=b[1];Object(C.f)();function x(){return(x=Object(o.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.email.value.trim(),e.prev=2,e.next=5,d()({method:"post",url:"/api/request_reset_email",data:{email:n}});case 5:s=e.sent,console.log(s),200===s.status?(c(!0),O("success"),m("Request Sent! Check Email For Password Reset Link!")):(c(!0),O("warning"),m("Something Went Wrong, Please Try Again Later!")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.response),400===e.t0.response.status?(c(!0),O("warning"),m("No User Found By This Email! Try Again!")):(c(!0),O("danger"),m("Something Went Wrong, Please Try Again Later!"));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){a&&setTimeout((function(){c(!1)}),9e3)})),Object(L.jsxs)("div",{children:[function(){if(a)return Object(L.jsx)(R.a,{variant:f,children:j})}(),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"Reset Password"}),Object(L.jsxs)(I.a,{onSubmit:function(e){return function(e){return x.apply(this,arguments)}(e)},children:[Object(L.jsxs)(I.a.Group,{controlId:"email",children:[Object(L.jsx)(I.a.Label,{children:"Email"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"email",placeholder:"Account Email"})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Request Password Reset"})]})]})]})}function ge(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)("Something went wrong, please try again later!"),c=Object(l.a)(a,2),u=c[0],h=c[1],j=Object(s.useState)("warning"),m=Object(l.a)(j,2),p=m[0],b=m[1],f=(Object(C.f)(),Object(C.g)().token);function O(){return(O=Object(o.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.password.value,e.prev=2,e.next=5,d()({method:"post",url:"/api/reset_password",data:{password:n,token:f}});case 5:s=e.sent,console.log(s),200===s.status?(r(!0),b("success"),h("Password Has Been Reset!")):(r(!0),b("warning"),h("Something Went Wrong, Please Try Again Later!")),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),r(!0),b("danger"),h("Something Went Wrong, Please Try Again Later!");case 16:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){n&&setTimeout((function(){r(!1)}),5e3)})),Object(L.jsxs)("div",{children:[function(){if(n)return Object(L.jsx)(R.a,{variant:p,children:u})}(),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("legend",{className:"border-bottom mb-4",children:"New Password"}),Object(L.jsxs)(I.a,{onSubmit:function(e){return function(e){return O.apply(this,arguments)}(e)},children:[Object(L.jsxs)(I.a.Group,{controlId:"password",children:[Object(L.jsx)(I.a.Label,{children:"New Password"}),Object(L.jsx)(I.a.Control,{required:!0,size:"lg",type:"password",placeholder:"New Password"})]}),Object(L.jsx)(Y.a,{variant:"outline-info",type:"submit",children:"Reset Password"})]})]})]})}var ke=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Rules"}),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("h2",{children:"1. No Spam / Advertising / Self-promotion in the forums"}),Object(L.jsx)("p",{children:"This forum defines spam as: unsolicited advertisement for goods, services and/or other web sites, or posts with little, or completely unrelated content. Do not spam the forums with links to your site or product, or try to self-promote your website, business or forums etc."}),Object(L.jsx)("h2",{children:"2. Respect"}),Object(L.jsx)("p",{children:"All posts should be professional and courteous. You have every right to disagree with your fellow community members and explain your perspective. However, you are not free to attack, degrade, insult, or otherwise belittle them or the quality of this community."}),Object(L.jsx)("hr",{}),Object(L.jsx)("small",{children:"These rules are subject to change at any time when we feel it is needed. Please check here in case of changes to these rules."})]})]})}}]),n}(s.Component),ye=function(e){Object(M.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Resources"}),Object(L.jsxs)("div",{className:"content-section",children:[Object(L.jsx)("p",{children:"Just in Case you need a quick reminder..."}),Object(L.jsx)("a",{href:"https://en.wikipedia.org/wiki/Zen",children:"Wikipedia (zen)"}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{children:"Koan Search and Podcast from our friends"}),Object(L.jsx)("a",{href:"https://zenmarrow.com/",children:"ZenMarrow"}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{children:"The birth place of our history"}),Object(L.jsx)("a",{href:"https://www.reddit.com/r/zen/",children:"Reddit r/zen"}),Object(L.jsx)("hr",{}),Object(L.jsx)("p",{children:"The well of ancient texts!"}),Object(L.jsx)("a",{href:"https://terebess.hu/zen/index.html",children:"Terebess"})]})]})}}]),n}(s.Component),we=function(e){Object(M.a)(s,e);var t=Object(A.a)(s);function s(e){var n;return Object(D.a)(this,s),(n=t.call(this,e)).state={postsViewable:4},n}return Object(E.a)(s,[{key:"renderLoader",value:function(){var e=this.props.posts;if(0===Object.keys(e).length)return Object(L.jsx)(ae.a,{animation:"border",style:{margin:"30px"}})}},{key:"renderDatePosted",value:function(e){var t=n(64)(e).format("dddd, MMMM Do YYYY, h:mm:ss a");return Object(L.jsx)("small",{className:"text-muted",children:t})}},{key:"renderArticleContent",value:function(e,t){return e.length>1e3?Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"article-content",children:Q()(e.substr(0,1e3))}),Object(L.jsx)(J.a,{className:"mr-2",to:"/post/".concat(t),children:"Read More"})]}):Object(L.jsx)("div",{className:"article-content",children:Q()(e)})}},{key:"renderProfileImage",value:function(e){return Object(L.jsx)("img",{className:"rounded-circle article-img",src:"https://zennitapp.s3.amazonaws.com/".concat(e),alt:""})}},{key:"renderPostContent",value:function(){var e=this,t=this.state.postsViewable,n=this.props.match.params.input,s=this.props.posts.filter((function(e){var t=n.toLowerCase(),s=JSON.stringify(e["user.username"].toLowerCase()),r=JSON.stringify(e.content.toLowerCase()),a=JSON.stringify(e.title.toLowerCase());if(r.includes(t)||a.includes(t)||s.includes(t))return!0}));return 0===Object.keys(s).length?Object(L.jsx)("h1",{children:"Sorry we couldn't find anything!"}):s.map((function(t){return Object(L.jsx)("div",{children:Object(L.jsxs)(F.a,{className:"content-section",children:[Object(L.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.renderProfileImage(t["user.image_file"])}),Object(L.jsxs)(F.a.Body,{children:[Object(L.jsxs)("div",{className:"article-metadata",children:[Object(L.jsx)(J.a,{className:"mr-2",to:"/user_posts/".concat(t["user.username"]),children:t["user.username"]}),e.renderDatePosted(t.date_posted)]}),Object(L.jsx)("h2",{children:Object(L.jsx)(J.a,{className:"article-title",to:"/post/".concat(t.id),children:t.title})}),Object(L.jsx)("hr",{}),e.renderArticleContent(t.content,t.id)]})]})},t.id)})).slice(0,t)}},{key:"renderMorePosts",value:function(e){var t=e.target,n=this.state.postsViewable;t.scrollHeight-t.scrollTop===t.clientHeight&&this.setState({postsViewable:n+2},(function(){console.log(n)}))}},{key:"render",value:function(){var e=this;return Object(L.jsxs)("div",{children:[this.renderLoader(),Object(L.jsx)("div",{className:"scrolling",onScroll:function(t){return e.renderMorePosts(t)},children:this.renderPostContent()})]})}}]),s}(s.Component),Ne=Object(oe.d)(C.h,Object(h.b)((function(e){return{posts:e.posts.items}}),{fetchPosts:x}))(we),Ce=n(85);var Se=Object(h.b)((function(e){return{posts:e.posts.items,user:e.users.item,comments:e.comments.items,notifications:e.notifications.items}}),{fetchPosts:x,fetchUser:v,fetchComments:g,fetchNotifications:k,fetchLikes:y,fetchDislikes:w})((function(e){var t=Object(s.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],c=Object(s.useState)(!1),u=Object(l.a)(c,2),h=u[0],j=u[1],m=Object(s.useState)("Welcome!"),p=Object(l.a)(m,2),b=p[0],f=p[1],O=localStorage.getItem("loginMessage"),x=localStorage.getItem("token");function v(){return(v=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=4;break}a(!1),e.next=15;break;case 4:return e.prev=4,e.next=7,d()({method:"get",url:"/api/verify_jwt",headers:{"x-access-token":localStorage.getItem("token")}});case 7:200===e.sent.status?(a(!0),j(!0),f("Login Successful! Welcome Back!")):(console.log("Token is invalid"),localStorage.removeItem("token")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("could not connect to authorization check"),localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){var t=e.fetchLikes,n=e.fetchDislikes,s=e.fetchUser,r=e.fetchNotifications,a=e.fetchComments,c=e.fetchPosts;r(),a(),c(),t(),n(),s()}),[]),Object(s.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[r||!x]),Object(L.jsx)(N.a,{children:Object(L.jsxs)("div",{className:"main-body",children:[Object(L.jsx)(z,{authorization:r}),Object(L.jsx)(P.a,{children:Object(L.jsxs)(Ce.a,{children:[Object(L.jsxs)("div",{className:"col-md-8",children:[function(){if(h&&r&&O)return setTimeout((function(){j(!1),f("Welcome!"),localStorage.removeItem("loginMessage")}),5e3),Object(L.jsx)(R.a,{className:"alert-home",variant:"success",children:b})}(),function(){var t=e.user,n=e.notifications,s=e.fetchNotifications;if(0!==Object.keys(t).length)return Object(L.jsx)(re,{user:t,notifications:n,fetchNotifications:s})}(),Object(L.jsxs)(C.c,{children:[Object(L.jsx)(C.a,{exact:!0,path:"/",children:Object(L.jsx)(ie,{authorization:r})}),Object(L.jsx)(C.a,{path:"/home",children:Object(L.jsx)(ie,{authorization:r})}),Object(L.jsx)(C.a,{path:"/search/:input",children:Object(L.jsx)(Ne,{})}),Object(L.jsx)(C.a,{path:"/user_posts/:username",children:Object(L.jsx)(ue,{authorization:r})}),Object(L.jsx)(C.a,{path:"/post/:id",children:Object(L.jsx)(je,{authorization:r})}),Object(L.jsx)(C.a,{path:"/update/post/:id",children:Object(L.jsx)(xe,{})}),Object(L.jsx)(C.a,{path:"/about",children:Object(L.jsx)(B,{})}),Object(L.jsx)(C.a,{path:"/rules",children:Object(L.jsx)(ke,{})}),Object(L.jsx)(C.a,{path:"/resources",children:Object(L.jsx)(ye,{})}),Object(L.jsx)(C.a,{path:"/account",children:Object(L.jsx)(Z,{})}),Object(L.jsx)(C.a,{path:"/forgot_password",children:Object(L.jsx)(ve,{})}),Object(L.jsx)(C.a,{path:"/reset_password/:token",children:Object(L.jsx)(ge,{})}),Object(L.jsx)(C.a,{path:"/register",children:Object(L.jsx)(V,{})}),Object(L.jsx)(C.a,{path:"/new_post",children:Object(L.jsx)(fe,{})}),Object(L.jsx)(C.a,{path:"/login",children:Object(L.jsx)(q,{})}),Object(L.jsx)(C.a,{path:"/logout",children:Object(L.jsx)(G,{})})]})]}),Object(L.jsx)(H,{})]})})]})})})),Te=n(125),_e=n(26),Pe={items:[],item:{}},Ie={likes:[],dislikes:[]},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(_e.a)(Object(_e.a)({},e),{},{likes:t.payload});case f:return Object(_e.a)(Object(_e.a)({},e),{},{dislikes:t.payload});default:return e}},ze={items:[],item:{}},De={items:[],item:{}},Ee={item:{}},Me=Object(oe.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(_e.a)(Object(_e.a)({},e),{},{items:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(_e.a)(Object(_e.a)({},e),{},{item:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(_e.a)(Object(_e.a)({},e),{},{items:t.payload});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(_e.a)(Object(_e.a)({},e),{},{items:t.payload});default:return e}},likes:Le,dislikes:Le}),Ae=[Te.a],Be=Object(oe.e)(Me,{},Object(oe.d)(oe.a.apply(void 0,Ae)));a.a.render(Object(L.jsx)(h.a,{store:Be,children:Object(L.jsx)(Se,{})}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.f3b072cf.chunk.js.map